# 姿勢分析アプリ (Posture Analysis App)

MediaPipe を使用したマーカーレス姿勢推定による、静的姿勢分析アプリケーションです。

## 🎯 機能

- **リアルタイム姿勢分析**: MediaPipe Pose を使用した高精度な姿勢検出
- **多角度撮影**: 正面・側面・背面からの姿勢評価
- **詳細レポート**: PDF形式での分析結果出力
- **履歴管理**: 過去の分析結果の保存・比較
- **改善提案**: 個人に合わせたエクササイズ推奨

## 🏗️ アーキテクチャ

```
[Flutter Mobile App] ↔ [FastAPI Backend] ↔ [MediaPipe Engine]
                                      ↕
                              [Cloud Storage & DB]
```

## 🚀 セットアップ

### 必要要件

- Python 3.11+
- Flutter 3.0+
- Docker & Docker Compose (オプション)

### バックエンド設定

1. 依存関係のインストール
```bash
cd backend
pip install -r requirements.txt
```

2. サーバー起動
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000 --reload
```

### フロントエンド設定

1. 依存関係のインストール
```bash
cd frontend
flutter pub get
```

2. アプリ起動
```bash
flutter run
```

### Docker での起動

```bash
docker-compose up --build
```

## 📱 使用方法

1. **撮影**: メイン画面の「姿勢を測定」ボタンから撮影開始
2. **ガイド**: 画面の指示に従って適切な姿勢で撮影
3. **分析**: 自動的に姿勢分析が実行される
4. **結果確認**: 詳細なスコアと改善提案を確認
5. **レポート**: PDF形式でのレポート生成・共有

## 🎨 UI/UX 設計

Sportip Pro をモデルとした直感的なデザイン:
- **主要カラー**: グリーン (#00C853)
- **フォント**: Noto Sans JP (Rounded)
- **レイアウト**: カード型でシンプルな構成

## 📊 分析項目

### 測定可能な姿勢指標
- 骨盤傾斜角度
- 胸椎後弯角度  
- 頸椎前弯角度
- 肩の高さの差
- 頭部前方偏位
- 腰椎前弯角度
- 肩甲骨前方突出
- 体幹側方偏位

### スコアリング
- **90-100点**: 優秀
- **80-89点**: 良好
- **70-79点**: 普通
- **50-69点**: 要改善
- **0-49点**: 要注意

## 🔧 API エンドポイント

### 主要エンドポイント
- `POST /analyze-posture`: 画像から姿勢分析実行
- `POST /generate-report`: PDF レポート生成
- `GET /metrics/reference`: 正常値参照データ取得
- `GET /health`: サーバー状態確認

## 🧪 テスト

```bash
# バックエンドテスト
cd backend
pytest

# フロントエンドテスト  
cd frontend
flutter test
```

## 📋 対応年齢層

3歳から90歳まで全年齢層に対応:
- 体格差に応じた自動スケーリング
- 年齢別正常値データベース
- 小児・高齢者特有パターン対応

## 🔒 セキュリティ & プライバシー

- TLS 1.3 暗号化通信
- 解析後72時間での画像自動削除
- GDPR・改正個人情報保護法準拠
- OAuth2 認証システム

## 🌐 多言語対応

- 日本語 (メイン)
- 英語 (今後対応予定)

## 📈 ロードマップ

### フェーズ1 (2025年8月)
- [x] プロトタイプ完成
- [x] 基本分析機能実装
- [x] UI/UX デザイン完成

### フェーズ2 (2025年9月)
- [ ] ベータ版リリース
- [ ] 精度検証・改善
- [ ] レポート機能実装

### フェーズ3 (2025年10月)
- [ ] App Store / Google Play 公開
- [ ] ユーザーフィードバック収集

### フェーズ4 (2025年12月)
- [ ] 履歴・比較機能
- [ ] エクササイズ提案システム
- [ ] 多施設PoC実施

## 🤝 コントリビューション

1. このリポジトリをフォーク
2. 機能ブランチを作成 (`git checkout -b feature/amazing-feature`)
3. 変更をコミット (`git commit -m 'Add amazing feature'`)
4. ブランチにプッシュ (`git push origin feature/amazing-feature`)
5. プルリクエストを作成

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 📞 サポート

技術的な質問やサポートが必要な場合は、Issues セクションでお気軽にお問い合わせください。

---

**開発チーム**: Claude Code & Development Team  
**バージョン**: 1.0.0  
**最終更新**: 2025年7月2日